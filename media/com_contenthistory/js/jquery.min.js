(function(){var a;a=jQuery,a.fn.extend({prettyTextDiff:function(b){var c,d;return d={originalContainer:".original",changedContainer:".changed",diffContainer:".diff",originalHtmlContainer:".originalhtml",changedHtmlContainer:".changedhtml",diffHtmlContainer:".diffhtml",cleanup:!0,debug:!1},d=a.extend(d,b),a.fn.prettyTextDiff.debug("Options: ",d,d),c=new diff_match_patch,this.each(function(){var b,e,f,g,h,i,j;return g=a(d.originalContainer,this).text(),a.fn.prettyTextDiff.debug("Original text found: ",g,d),b=a(d.changedContainer,this).text(),a.fn.prettyTextDiff.debug("Changed  text found: ",b,d),i=a(d.originalHtmlContainer,this).text(),a.fn.prettyTextDiff.debug("Original text found: ",g,d),h=a(d.changedHtmlContainer,this).text(),a.fn.prettyTextDiff.debug("Changed  text found: ",b,d),f=c.diff_main(g,b),j=c.diff_main(i,h),d.cleanup&&(c.diff_cleanupSemantic(f),c.diff_cleanupSemantic(j)),a.fn.prettyTextDiff.debug("Diffs: ",f,d),e=f.map(function(b){return a.fn.prettyTextDiff.createHTML(b)}),diffhtml_as_html=j.map(function(b){return a.fn.prettyTextDiff.createHTML(b)}),a(d.diffContainer,this).html(e.join("")),a(d.diffHtmlContainer,this).html(diffhtml_as_html.join("")),this})}}),a.fn.prettyTextDiff.debug=function(a,b,c){if(c.debug)return console.log(a,b)},a.fn.prettyTextDiff.createHTML=function(a){var b,c,d,e,f,g,h,i;switch(c=[],e=/&/g,g=/</g,f=/>/g,h=/\n/g,d=a[0],b=a[1],i=b.replace(e,"&amp;").replace(g,"&lt;").replace(f,"&gt;").replace(h,"<br>"),d){case DIFF_INSERT:return"<ins>"+i+"</ins>";case DIFF_DELETE:return"<del>"+i+"</del>";case DIFF_EQUAL:return"<span>"+i+"</span>"}}}).call(this);