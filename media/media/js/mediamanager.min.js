!function(a,b){"use strict";function c(b){var c={};return b=b||"",a.each(b.split(/[&;]/),function(a,b){var d=b.split("=");c[decodeURIComponent(d[0])]=2==d.length?decodeURIComponent(d[1]):null}),c}function d(b){var c={},d=b.match(/^(?:([^:\/?#.]+):)?(?:\/\/)?(([^:\/?#]*)(?::(\d*))?)((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[\?#]|$)))*\/?)?([^?#\/]*))?(?:\?([^#]*))?(?:#(.*))?/);return a.each(["uri","scheme","authority","domain","port","path","directory","file","query","fragment"],function(a,b){c[b]=d&&d[a]?d[a]:""}),c}function e(a){return a.scheme+"://"+a.domain+(a.port?":"+a.port:"")+(a.path?a.path:"/")+(a.query?"?"+a.query:"")+(a.fragment?"#"+a.fragment:"")}var f=b.MediaManager={initialize:function(){this.folderpath=a("#folderpath"),this.updatepaths=a("input.update-folder"),this.frame=window.frames.folderframe,this.frameurl=this.frame.location.href},submit:function(b){var c=this.frame.document.getElementById("mediamanager-form");c.task.value=b,a("#username").length&&(c.username.value=a("#username").val(),c.password.value=a("#password").val()),c.submit()},onloadframe:function(){this.frameurl=this.frame.location.href;var b,f,g=this.getFolder()||"",h=[],i=d(a("#uploadForm").attr("action")),j=c(i.query);this.updatepaths.each(function(a,b){b.value=g}),this.folderpath.value=basepath+(g?"/"+g:""),j.folder=g;for(b in j)j.hasOwnProperty(b)&&(f=j[b],h.push(b+(null===f?"":"="+f)));i.query=h.join("&"),i.fragment=null,a("#uploadForm").attr("action",e(i)),a("#"+viewstyle).addClass("active")},setViewType:function(b){a("#"+b).addClass("active"),a("#"+viewstyle).removeClass("active"),viewstyle=b;var c=this.getFolder();this.setFrameUrl("index.php?option=com_media&view=mediaList&tmpl=component&folder="+c+"&layout="+b)},refreshFrame:function(){this.setFrameUrl()},getFolder:function(){var a=c(this.frame.location.search.substring(1));return a.folder=void 0===a.folder?"":a.folder,a.folder},setFrameUrl:function(a){null!==a&&(this.frameurl=a),this.frame.location.href=this.frameurl}};a(function(){f.initialize(),document.updateUploader=function(){f.onloadframe()},f.onloadframe()})}(jQuery,window);